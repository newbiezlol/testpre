--// üì¶ SERVICES
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

--// üß† T·∫†O HWID
local function getHWID()
    return tostring(LocalPlayer.UserId) .. "-" .. tostring(LocalPlayer.Name)
end

--// üîê C·∫§U H√åNH
local KEY_CHECK_URL = "https://raw.githubusercontent.com/newbiezlol/roblox-keysystem/main/key.json"


--// üß© T·∫°o UI Nh·∫≠p Key (d√πng Fluent UI)
local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/LongThanhTz12/GUI-LIBARY-SCRIPT/refs/heads/main/guilibaryscript"))()

local Window = Fluent:CreateWindow({
    Title = "üîë Nh·∫≠p Key",
    SubTitle = "H·ªá th·ªëng ki·ªÉm tra key Roblox",
    TabWidth = 160,
    Size = UDim2.fromOffset(400, 250),
    Acrylic = true,
    Theme = "Dark"
})

local Tab = Window:AddTab({ Title = "Verify", Icon = "üîê" })

local InputKey = Tab:AddInput("KeyInput", {
    Title = "D√°n Key v√†o ƒë√¢y",
    Default = "",
    Placeholder = "Nh·∫≠p key b·∫°n ƒë√£ ƒë∆∞·ª£c c·∫•p...",
    Numeric = false,
    ClearTextOnFocus = false
})

local Notify = function(text)
    Fluent:Notify({
        Title = "Th√¥ng b√°o",
        Content = text,
        SubContent = "H·ªá th·ªëng key",
        Duration = 5
    })
end

local function validateKey(key)
    local success, response = pcall(function()
        return HttpService:JSONDecode(game:HttpGet(KEY_CHECK_URL))
    end)

    if not success then
        return false, "L·ªói khi k·∫øt n·ªëi t·ªõi GitHub!"
    end

    local data = response[key]
    if not data then
        return false, "‚ùå Key kh√¥ng t·ªìn t·∫°i!"
    end

    local hwid = getHWID()
    if data["hwid"] == nil or data["hwid"] == "" then
        return true, "FIRST_USE", hwid
    elseif data["hwid"] == hwid then
        return true, "VALID", hwid
    else
        return false, "‚ö†Ô∏è Key ƒë√£ b·ªã r√†ng bu·ªôc thi·∫øt b·ªã kh√°c!"
    end
end

Tab:AddButton({
    Title = "‚úîÔ∏è Ki·ªÉm Tra Key",
    Description = "Nh·∫•n ƒë·ªÉ x√°c minh key b·∫°n ƒë√£ nh·∫≠p",
    Callback = function()
        local key = InputKey.Value
        if key == "" then
            Notify("‚ùå Vui l√≤ng nh·∫≠p key!")
            return
        end

        local ok, status, hwid = validateKey(key)
        if ok and status == "VALID" then
            Notify("‚úÖ Key h·ª£p l·ªá! Ti·∫øp t·ª•c...")
            Window:Destroy()
        elseif ok and status == "FIRST_USE" then
            Notify("üÜó Key h·ª£p l·ªá l·∫ßn ƒë·∫ßu. G√°n HWID th·ªß c√¥ng:\n" .. hwid)
            Window:Destroy()
        else
            Notify("‚ùå " .. tostring(status))
            task.wait(2)
            LocalPlayer:Kick("Key kh√¥ng h·ª£p l·ªá ho·∫∑c b·ªã r√†ng bu·ªôc sai thi·∫øt b·ªã!")
        end
    end
})
