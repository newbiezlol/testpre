-- âš™ï¸ SERVICES
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

-- ğŸ”‘ CONFIG
local KEY_CHECK_URL = "https://raw.githubusercontent.com/newbiezlol/roblox-keysystem/main/key.json"

-- ğŸŒˆ Load Fluent UI
local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/LongThanhTz12/Fluent/main/source.lua"))()
local Window = Fluent:CreateWindow({
    Title = "ğŸ” Key System",
    SubTitle = "Vui lÃ²ng nháº­p key Ä‘á»ƒ tiáº¿p tá»¥c",
    TabWidth = 160,
    Size = UDim2.fromOffset(450, 300),
    Acrylic = true,
    Theme = "Dark",
    Center = true,
    Footer = "by newbiez",
    Draggable = true,
})

local Tabs = {
    Main = Window:AddTab({ Title = "Check Key", Icon = "KeyRound" }),
}

-- ğŸ§  Check key vá»›i GitHub
local function checkKey(inputKey)
	local success, response = pcall(function()
		return HttpService:JSONDecode(game:HttpGet(KEY_CHECK_URL))
	end)

	if success and response[inputKey] then
		local expectedUsername = response[inputKey]
		local actualUsername = localPlayer.Name

		if expectedUsername == actualUsername then
			return true
		else
			localPlayer:Kick("ğŸ” Key nÃ y khÃ´ng thuá»™c vá» tÃ i khoáº£n " .. actualUsername)
		end
	else
		localPlayer:Kick("âŒ Key khÃ´ng há»£p lá»‡ hoáº·c khÃ´ng tá»“n táº¡i.")
	end

	return false
end

-- ğŸ“¥ UI nháº­p key
local userKey = ""

Tabs.Main:AddInput("InputKey", {
	Title = "ğŸ”‘ Nháº­p Key",
	Default = "",
	Placeholder = "Nháº­p key táº¡i Ä‘Ã¢y...",
	Callback = function(value)
		userKey = value
	end,
})

Tabs.Main:AddButton({
	Title = "âœ… Kiá»ƒm Tra Key",
	Description = "Báº¥m Ä‘á»ƒ xÃ¡c minh",
	Callback = function()
		if checkKey(userKey) then
			Fluent:Notify({
				Title = "ThÃ nh cÃ´ng!",
				Content = "Key há»£p lá»‡. ChÃ o " .. localPlayer.Name,
				SubContent = "Script Ä‘ang cháº¡y...",
				Duration = 3
			})

			task.delay(2, function()
				Window:Destroy()
				-- ğŸŸ¢ CHáº Y SCRIPT CHÃNH á» ÄÃ‚Y
				-- loadstring(game:HttpGet("LINK_SCRIPT_CHÃNH"))()
			end)
		end
	end,
})
